---
theme: vue-pro
highlight: a11y-dark
---

> å—¨ï¼~ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯YKèŒ ğŸ· ï¼Œä¸€ä¸ªå¾®ç³»å‰ç«¯ âœ¨ï¼Œçˆ±æ€è€ƒï¼Œçˆ±æ€»ç»“ï¼Œçˆ±è®°å½•ï¼Œçˆ±åˆ†äº« ğŸ¹ï¼Œæ¬¢è¿å…³æ³¨æˆ‘å‘€ ğŸ˜˜ ~ [å¾®ä¿¡å·: `yk2012yk2012`ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼š`ykyk2012`]


ã€Œè¿™æ˜¯æˆ‘å‚ä¸11æœˆæ›´æ–‡æŒ‘æˆ˜çš„ç¬¬27å¤©ï¼Œæ´»åŠ¨è¯¦æƒ…æŸ¥çœ‹ï¼š[2021æœ€åä¸€æ¬¡æ›´æ–‡æŒ‘æˆ˜](https://juejin.cn/post/7023643374569816095/ "https://juejin.cn/post/7023643374569816095/")ã€

> ä»Šå¤©æˆ‘ä»¬æ¥ç”¨Vueåšç¬¬ä¸‰ä¸ªå°demoï¼Œä¸€ä¸ªGithubç”¨æˆ·æœç´¢çš„å°æ¡ˆä¾‹ï¼Œä¹‹å‰æˆ‘ä»¬ç”¨Reactä¹Ÿåšè¿‡ï¼Œè¿™æ¬¡ç”¨Vueåšä¸€æ¬¡ï¼Œä½¿ç”¨axiosæ¥å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚



# 0. ä½¿ç”¨Vue-clié…ç½®ä»£ç†

## æ–¹æ³•â‘ 

åœ¨vue.config.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š

```javascript
devServer:{
  proxy:"http://localhost:5000"
}
```

è¯´æ˜ï¼š

1. ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚
2. ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚
3. å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰

## æ–¹æ³•â‘¡ 

ç¼–å†™vue.config.jsé…ç½®å…·ä½“ä»£ç†è§„åˆ™ï¼š

```javascript
module.exports = {
	devServer: {
      proxy: {
      '/api1': {// åŒ¹é…æ‰€æœ‰ä»¥ '/api1'å¼€å¤´çš„è¯·æ±‚è·¯å¾„
        target: 'http://localhost:5000',// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„
        changeOrigin: true,
        pathRewrite: {'^/api1': ''}
      },
      '/api2': {// åŒ¹é…æ‰€æœ‰ä»¥ '/api2'å¼€å¤´çš„è¯·æ±‚è·¯å¾„
        target: 'http://localhost:5001',// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„
        changeOrigin: true,
        pathRewrite: {'^/api2': ''}
      }
    }
  }
}
/*
   changeOriginè®¾ç½®ä¸ºtrueæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:5000
   changeOriginè®¾ç½®ä¸ºfalseæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:8080
   changeOriginé»˜è®¤å€¼ä¸ºtrue
*/
```

è¯´æ˜ï¼š

1. ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚
2. ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€ã€‚



# 1. å‡†å¤‡å·¥ä½œ
ç•Œé¢æ‹†åˆ†

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8fc50e3c92ee4f1587461ceb99c570a8~tplv-k3u1fbpfcp-zoom-1.image)

# 2. é™æ€é¡µé¢
## index.html

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>demo_ajax</title>
    <link rel="stylesheet" href="./static/users_page/bootstrap.css">
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
```

## App.vue

```html
<template>
  <div class="container">
    <search />
    <users-main />
  </div>
</template>

<script>
import Main from "./components/Main.vue";
import Search from "./components/Search.vue";

export default {
  components: { Search, UsersMain: Main }, //ä¸èƒ½ç”¨mainä½œä¸ºæ ‡ç­¾åï¼Œå°±æ¢ä¸€ä¸ªåå­—
};
</script>

<style>
</style>
```

## Search.vue

```html
<template>
  <section class="jumbotron">
    <h3 class="jumbotron-heading">Search Github Users</h3>
    <div>
      <input type="text" placeholder="enter the name you search" />
      <button>Search</button>
    </div>
  </section>
</template>

<script>
export default {};
</script>

<style>
</style>
```

## Main.vue

```html
<template>
  <div class="row">
    <div class="card">
      <a href="https://github.com/reactjs" target="_blank">
        <img
          src="https://avatars.githubusercontent.com/u/6412038?v=3"
          style="width: 100px"
        />
      </a>
      <p class="card-text">reactjs</p>
    </div>
    <div class="card">
      <a href="https://github.com/reactjs" target="_blank">
        <img
          src="https://avatars.githubusercontent.com/u/6412038?v=3"
          style="width: 100px"
        />
      </a>
      <p class="card-text">reactjs</p>
    </div>
    <div class="card">
      <a href="https://github.com/reactjs" target="_blank">
        <img
          src="https://avatars.githubusercontent.com/u/6412038?v=3"
          style="width: 100px"
        />
      </a>
      <p class="card-text">reactjs</p>
    </div>
    <div class="card">
      <a href="https://github.com/reactjs" target="_blank">
        <img
          src="https://avatars.githubusercontent.com/u/6412038?v=3"
          style="width: 100px"
        />
      </a>
      <p class="card-text">reactjs</p>
    </div>
    <div class="card">
      <a href="https://github.com/reactjs" target="_blank">
        <img
          src="https://avatars.githubusercontent.com/u/6412038?v=3"
          style="width: 100px"
        />
      </a>
      <p class="card-text">reactjs</p>
    </div>
  </div>
</template>

<script>
export default {};
</script>

<style>
.card {
  float: left;
  width: 33.333%;
  padding: .75rem;
  margin-bottom: 2rem;
  border: 1px solid #efefef;
  text-align: center;
}

.card > img {
  margin-bottom: .75rem;
  border-radius: 100px;
}

.card-text {
  font-size: 85%;
}
</style>
```
# 3. åˆå§‹åŒ–æ˜¾ç¤º
## main.vue
```html
<template>
  <div>
    <h2 v-if="firstView">è¯·è¾“å…¥ç”¨æˆ·åæœç´¢</h2>
    <h2 v-if="loading">Loading...</h2>
    <h2 v-if="errorMsg">{{errorMsg}}</h2>
    <div class="row">
      <div class="card" v-for="(user, index) in users" :key="index">
        <a :href="user.url" target="_blank">
          <img
            :src="user.avatar_url"
            style="width: 100px"
          />
        </a>
        <p class="card-text">{{user.name}}</p>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      // ç•Œé¢æœ‰å››ä¸ªçŠ¶æ€
      firstView: true,
      loading: false,
      users: null, //[{url:'', avatar_url: '', name: ''}]
      errorMsg: ''
    };
  },
};
</script>
```

# 4. äº¤äº’åŠŸèƒ½å®ç°
è¾“å…¥å…³é”®å­—ç‚¹å‡»æœç´¢ï¼Œç•Œé¢å‘ç”Ÿå˜åŒ–

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å‘å¸ƒè®¢é˜…çš„åº“ `pubsub-js`

## Search.vue

```html
<template>
  <section class="jumbotron">
    <h3 class="jumbotron-heading">Search Github Users</h3>
    <div>
      <input
        type="text"
        placeholder="enter the name you search"
        v-model="searchName"
      />
      <button @click="search">Search</button>
    </div>
  </section>
</template>

<script>
import PubSub from "pubsub-js";
export default {
  data() {
    return {
      searchName: "",
    };
  },
  methods: {
    search() {
      const searchName = this.searchName.trim();
      if (searchName) {
        // å‘å¸ƒæœç´¢çš„æ¶ˆæ¯
        PubSub.publish("search", searchName);
      }
    },
  },
};
</script>

<style>
</style>
```
## Main.vue

```html
<template>
  <div>
    <h2 v-if="firstView">è¯·è¾“å…¥ç”¨æˆ·åæœç´¢</h2>
    <h2 v-if="loading">Loading...</h2>
    <h2 v-if="errorMsg">{{ errorMsg }}</h2>
    <div class="row" v-else>
      <div class="card" v-for="(user, index) in users" :key="index">
        <a :href="user.url" target="_blank">
          <img :src="user.avatar_url" style="width: 100px" />
        </a>
        <p class="card-text">{{ user.name }}</p>
      </div>
    </div>
  </div>
</template>

<script>
import PubSub from "pubsub-js";
import axios from "axios";
export default {
  data() {
    return {
      // ç•Œé¢æœ‰å››ä¸ªçŠ¶æ€
      firstView: true,
      loading: false,
      users: null, // [{url:'', avatar_url: '', name: ''}]
      errorMsg: "",
    };
  },
  mounted() {
    // è®¢é˜…æœç´¢çš„æ¶ˆæ¯
    PubSub.subscribe("search", (msg, searchName) => {
      // è¯´æ˜éœ€è¦å‘ajaxè¯·æ±‚æœç´¢
      const url = `https://api.github.com/search/users?q=${searchName}`;

      //æ›´æ–°çŠ¶æ€ï¼ˆè¯·æ±‚ä¸­ï¼‰
      this.firstView = false;
      this.loading = true;
      this.users = null;
      this.errorMsg = "";

      // å‘ajaxçŠ¶æ€
      axios
        .get(url)
        .then((response) => {
          const result = response.data;
          const users = result.items.map((item) => ({
            url: item.html_url,
            avatar_url: item.avatar_url,
            name: item.login,
          }));
          // æˆåŠŸï¼Œ æ›´æ–°çŠ¶æ€ï¼ˆæˆåŠŸï¼‰
          this.loading = false;
          this.users = users;
        })
        .catch((error) => {
          // å¤±è´¥ï¼Œ æ›´æ–°çŠ¶æ€ï¼ˆå¤±è´¥ï¼‰
          this.loading = false;
          this.errorMsg = "è¯·æ±‚å¤±è´¥";
        });
    });
  },
};
</script>
```

# 5. æ•ˆæœå±•ç¤º

æœ€åå¯ä»¥çœ‹ä¸‹æˆ‘ä»¬çš„æ•ˆæœ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd5c8ccd82304ba3ae3976d0fb8d86d6~tplv-k3u1fbpfcp-zoom-1.image)



> æœ€åï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ä¸“æ ï¼Œå’Œ**YKèŒ**åšå¥½æœ‹å‹

