---
theme: vue-pro
highlight: a11y-dark
---

> å—¨ï¼~ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯YKèŒ ğŸ· ï¼Œä¸€ä¸ªå¾®ç³»å‰ç«¯ âœ¨ï¼Œçˆ±æ€è€ƒï¼Œçˆ±æ€»ç»“ï¼Œçˆ±è®°å½•ï¼Œçˆ±åˆ†äº« ğŸ¹ï¼Œæ¬¢è¿å…³æ³¨æˆ‘å‘€ ğŸ˜˜ ~ [å¾®ä¿¡å·: `yk2012yk2012`ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼š`ykyk2012`]


ã€Œè¿™æ˜¯æˆ‘å‚ä¸11æœˆæ›´æ–‡æŒ‘æˆ˜çš„ç¬¬25å¤©ï¼Œæ´»åŠ¨è¯¦æƒ…æŸ¥çœ‹ï¼š[2021æœ€åä¸€æ¬¡æ›´æ–‡æŒ‘æˆ˜](https://juejin.cn/post/7023643374569816095/ "https://juejin.cn/post/7023643374569816095/")ã€

> ä»Šå¤©æˆ‘ä»¬æ¥ä½¿ç”¨Vueå†åšä¸€ä¸ªå°demoï¼Œå¾…åŠäº‹é¡¹å°demoï¼Œä¹‹å‰ç”¨Reactä¹Ÿåšè¿‡ä¸€æ ·åŠŸèƒ½çš„demoï¼Œå¯ä»¥å¯¹æ¯”å­¦ä¹ ~


[é¡¹ç›®ä»£ç  https://github.com/yk2012/vue_demo/tree/main/demo3_TodoList](https://github.com/yk2012/vue_demo/tree/main/demo3_TodoList)
# 1. ç›®æ ‡åŠŸèƒ½ç•Œé¢
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/640fe6047d5d478bae8865c916306cb1~tplv-k3u1fbpfcp-zoom-1.image)

# 2. ç•Œé¢æ¨¡å—æ‹†åˆ†
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5fc28315bf7a4ca58de95a95899af14d~tplv-k3u1fbpfcp-zoom-1.image)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76e91b8fc18a4409a2c9e96fafee4c8a~tplv-k3u1fbpfcp-zoom-1.image)

# 3. ä¸»é¡µ index.html

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>vue_demo</title>
  </head>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
```

# 4. é™æ€é¡µé¢æ­å»º
## 4.1 main.js
- å¼•å…¥åŸºç¡€cssæ ·å¼

```javascript
import Vue from 'vue';
import App from './App.vue';
import './base.css';

new Vue({
    el: '#app',
    components: { App },
    template: '<App/>'
})
```
## 4.2 App.vue

```html
<template>
  <div class="todo-container">
    <div class="todo-wrap">

      <TodoHeader />
      <TodoList />
      <TodoFooter />

    </div>
  </div>
</template>

<script>
  import TodoHeader from './components/TodoHeader';
  import TodoList from './components/TodoList';
  import TodoFooter from './components/TodoFooter';

  export default {
    components:{
      TodoHeader,
      TodoList,
      TodoFooter
    }
  }
</script>

<style>
/*app*/
.todo-container {
  width: 600px;
  margin: 0 auto;
}
.todo-container .todo-wrap {
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
}
</style>
```

## 4.3 TodoHeader.vue

```html
<template>
  <div class="todo-header">
    <input type="text" placeholder="è¯·è¾“å…¥ä½ çš„ä»»åŠ¡åç§°ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤"/>
  </div>
</template>

<script>
export default {

}
</script>

<style>
/*header*/
.todo-header input {
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
}

.todo-header input:focus {
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
}

</style>
```
## 4.4 TodoList.vue

```html
<template>
  <ul class="todo-main">
    <li>
      <label>
        <input type="checkbox"/>
        <span>xxxxx</span>
      </label>
      <button class="btn btn-danger" style="display:none">åˆ é™¤</button>
    </li>
    <li>
      <label>
        <input type="checkbox"/>
        <span>yyyyy</span>
      </label>
      <button class="btn btn-danger" style="display:none">åˆ é™¤</button>
    </li>
  </ul>
</template>

<script>
export default {

}
</script>


<style>
/*main*/
.todo-main {
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
}

.todo-empty {
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
}

/*item*/
li {
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
}

li label {
  float: left;
  cursor: pointer;
}

li label li input {
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
}

li button {
  float: right;
  display: none;
  margin-top: 3px;
}

li:before {
  content: initial;
}

li:last-child {
  border-bottom: none;
}
</style>
```

## 4.5 TodoFooter.vue

```html
<template>
        <div class="todo-footer">
        <label>
          <input type="checkbox"/>
        </label>
        <span>
          <span>å·²å®Œæˆ0</span> / å…¨éƒ¨2
        </span>
        <button class="btn btn-danger">æ¸…é™¤å·²å®Œæˆä»»åŠ¡</button>
      </div>
</template>

<script>
export default {

}
</script>

<style>
/*footer*/
.todo-footer {
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
}

.todo-footer label {
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
}

.todo-footer label input {
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
}

.todo-footer button {
  float: right;
  margin-top: 5px;
}

</style>
```

## 4.6 å±•ç¤º
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/db5eb8ce694941cdb650499eb9861827~tplv-k3u1fbpfcp-zoom-1.image)

# 5. åŠ¨æ€ç»„ä»¶
## 5.1 åŠ¨æ€æ˜¾ç¤ºåˆå§‹åŒ–æ•°æ®

### App.vue
å®šä¹‰æ•°æ®ï¼šæ•°ç»„ todos {title, complete}
```html
<template>
  <div class="todo-container">
    <div class="todo-wrap">

      <TodoHeader />
      <TodoList :todos="todos" />
      <TodoFooter />

    </div>
  </div>
</template>

<script>
  import TodoHeader from './components/TodoHeader';
  import TodoList from './components/TodoList';
  import TodoFooter from './components/TodoFooter';

  export default {
    data(){
      return{
        todos: [
          { title: 'åƒé¥­', complete: true },
          { title: 'ç¡è§‰', complete: false },
          { title: 'æ•²ä»£ç ', complete: true }
        ]
      }
    },
    components:{
      TodoHeader,
      TodoList,
      TodoFooter
    }
  }
</script>
```


### TodoList.vue
æ¥æ”¶æ•°æ®ï¼Œv-foréå†æ•°ç»„
```html
<template>
  <ul class="todo-main">
    <TodoItem v-for="(todo, index) in todos" :key="index" :todo="todo"/>
  </ul>
</template>

<script>
import TodoItem from './TodoItem';
export default {
  props: {
    todos: Array
  },
  components:{
    TodoItem
  }
}
</script>
```




### TodoItem.vue
å¾—åˆ°æ•°æ®ï¼ŒåŒå‘ç»‘å®š
```html
<template>
  <li>
    <label>
      <input type="checkbox" v-model="todo.complete" />
      <span>{{todo.title}}</span>
    </label>
    <button class="btn btn-danger" style="display:none">åˆ é™¤</button>
  </li>
</template>

<script>
export default {
  props:{
    todo: Object,
  }
}
</script>
```


### å±•ç¤º
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d66b115a6aa04f5690064f064c6266dc~tplv-k3u1fbpfcp-zoom-1.image)

## 5.2 åŠ¨æ€äº¤äº’â€”â€”é¦–éƒ¨æ·»åŠ æ“ä½œ
### App.vue
å®šä¹‰æ·»åŠ addTodoå‡½æ•°
```html
<template>
  <TodoHeader :addTodo="addTodo" />
</template>

<script>
  export default {
    methods:{
      addTodo(todo){
        this.todos.unshift(todo);
      }
    },
  }
</script>
```

### TodoHeader.vue
v-modelåŒå‘ç»‘å®šæ•°æ®
å®šä¹‰addé¼ æ ‡ç‚¹å‡»äº‹ä»¶å‡½æ•°
1. æ£€æŸ¥è¾“å…¥åˆæ³•æ€§
2. æ ¹æ®è¾“å…¥ç”Ÿæˆä¸€ä¸ªtodoå¯¹è±¡
3. æ·»åŠ åˆ°todos
4. æ¸…é™¤è¾“å…¥

```html
<template>
  <div class="todo-header">
    <input type="text" placeholder="è¯·è¾“å…¥ä½ çš„ä»»åŠ¡åç§°ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤" v-model="title" @keyup.enter="add"/>
  </div>
</template>

<script>
export default {
  props:{
    addTodo: Function
  },
  data(){
    return {
      title: '',
    }

  },
  methods:{
    add(){
      // 1. æ£€æŸ¥è¾“å…¥åˆæ³•æ€§
      const title = this.title.trim();
      if(!title){
        alert("è¯·è¾“å…¥å†…å®¹");
        return;
      }
      // 2. æ ¹æ®è¾“å…¥ç”Ÿæˆä¸€ä¸ªtodoå¯¹è±¡
      const todo = {title, complete:false};
      // 3. æ·»åŠ åˆ°todos
      this.addTodo(todo);
      // 4. æ¸…é™¤è¾“å…¥
      this.title = '';
    }
  }
}
</script>
```

## 5.3 åŠ¨æ€äº¤äº’â€”â€”ä¸­é—´åˆ é™¤æ“ä½œ+é€‰ä¸­å˜è‰²
é€‰ä¸­å˜è‰² é¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç† æ”¹å˜èƒŒæ™¯é¢œè‰²ï¼Œå›¾æ ‡æ˜¾ç¤ºéšè—
åˆ é™¤å…ƒç´ æ“ä½œ


### App.vue
deleteTodo åˆ é™¤æ•°ç»„ä¸­æŒ‡å®šå…ƒç´ 
```html
<template>
	<TodoList :todos="todos" :deleteTodo="deleteTodo" />
</template>

<script>
  export default {
    methods:{
      deleteTodo(index){
        this.todos.splice(index, 1);
      }
    },
  }
</script>
```

### TodoList.vue
ä¼ é€’æ ‡ç­¾ï¼Œåˆ é™¤å‡½æ•°
```html
<template>
  <ul class="todo-main">
    <TodoItem v-for="(todo, index) in todos" :key="index" :todo="todo" :index="index" :deleteTodo="deleteTodo" />
  </ul>
</template>

<script>
import TodoItem from './TodoItem';
export default {
  props: {
    todos: Array,
    deleteTodo: Function
  },
  components:{
    TodoItem
  }
}
</script>
```

### TodoItem.vue
é¼ æ ‡ç§»åŠ¨äº‹ä»¶ å‡½æ•°æ“ä½œèƒŒæ™¯é¢œè‰²æ”¹å˜ã€å›¾æ ‡æ˜¾ç¤ºéšè—
åˆ é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶ å‡½æ•°
```html
<template>
  <li @mouseenter="handleEnter(true)" @mouseleave="handleEnter(false)" :style="{background: bgColor}">
    <label>
      <input type="checkbox" v-model="todo.complete" />
      <span>{{todo.title}}</span>
    </label>
    <button class="btn btn-danger" v-show="isShow" @click="deleteItem">åˆ é™¤</button>
  </li>
</template>

<script>
  export default {
    props:{
      todo: Object,
      index: Number,
      deleteTodo: Function
    },
    data(){
      return {
        bgColor: 'white',
        isShow: false
      }
    },
    methods: {
      handleEnter(isEnter){
        if(isEnter){
          this.bgColor='#aaa';
          this.isShow = true;
        }else{
          this.bgColor='white';
          this.isShow = false; 
        }
      },
      deleteItem(){
        const {todo, index, deleteTodo} = this;
        if(window.confirm(`ç¡®å®šåˆ é™¤"${todo.title}"å—`)){
          deleteTodo(index);
        }
      },
    }
  }
</script>
```

## 5.4 åŠ¨æ€äº¤äº’â€”â€”åº•éƒ¨å…¨é€‰ + åˆ é™¤æ“ä½œï¼ˆé‡éš¾ç‚¹ï¼‰

### App.vue
```html
<template>
	<TodoFooter :todos="todos" :deleteCompleteTodos="deleteCompleteTodos" :selectAllTodos="selectAllTodos"/>
</template>

<script>
  export default {
    methods:{
      addTodo(todo){
        this.todos.unshift(todo);
      },
      deleteTodo(index){
        this.todos.splice(index, 1);
      },
      deleteCompleteTodos(){
        this.todos = this.todos.filter(todo => !todo.complete);
      },
      selectAllTodos(check){
        this.todos.forEach(todo => todo.complete = check);
      }
    },
  }
</script>
```

### TodoFooter.vue
ç†Ÿç»ƒä½¿ç”¨è®¡ç®—å±æ€§
```html
<template>
  <div class="todo-footer">
    <label>
      <input type="checkbox" v-model="isAllCheck" />
    </label>
    <span> 
      <span>å·²å®Œæˆ{{ completeSize }}</span> / å…¨éƒ¨{{ todos.length }} 
    </span>
    <button class="btn btn-danger" v-show="completeSize" @click="deleteCompleteTodos">æ¸…é™¤å·²å®Œæˆä»»åŠ¡</button>
  </div>
</template>

<script>
export default {
  props: {
    todos: Array,
    deleteCompleteTodos: Function,
    selectAllTodos: Function,
  },
  computed: {
    completeSize() {
      return this.todos.reduce((preTotal, todo) => preTotal + (todo.complete?1:0), 0); 
    },
    isAllCheck: {
      get(){
        return this.completeSize===this.todos.length && this.completeSize>0
      },
      set(value){
        this.selectAllTodos(value);
      }
    }
  },
  methods: {
    deleteAll() {},
  },
};
</script>
```

# æ€»ç»“TodoListæ¡ˆä¾‹

1. ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š

    1) æ‹†åˆ†é™æ€ç»„ä»¶ï¼šç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸htmlå…ƒç´ å†²çªã€‚

    2) å®ç°åŠ¨æ€ç»„ä»¶ï¼šè€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼š

        1).ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯ã€‚

        2). ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šï¼ˆ<span style="color:red">çŠ¶æ€æå‡</span>ï¼‰ã€‚

    3) å®ç°äº¤äº’ï¼šä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚

2. propsé€‚ç”¨äºï¼š

    1) çˆ¶ç»„ä»¶ ==> å­ç»„ä»¶ é€šä¿¡

    2) å­ç»„ä»¶ ==> çˆ¶ç»„ä»¶ é€šä¿¡ï¼ˆè¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°ï¼‰


3. ä½¿ç”¨v-modelæ—¶è¦åˆ‡è®°ï¼šv-modelç»‘å®šçš„å€¼ä¸èƒ½æ˜¯propsä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸ºpropsæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼


4. propsä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶Vueä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚

# webStorage

1. å­˜å‚¨å†…å®¹å¤§å°ä¸€èˆ¬æ”¯æŒ5MBå·¦å³ï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½è¿˜ä¸ä¸€æ ·ï¼‰

2. æµè§ˆå™¨ç«¯é€šè¿‡ Window.sessionStorage å’Œ Window.localStorage å±æ€§æ¥å®ç°æœ¬åœ°å­˜å‚¨æœºåˆ¶ã€‚

3. ç›¸å…³APIï¼š

    1. `xxxxxStorage.setItem('key', 'value');` è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®å’Œå€¼ä½œä¸ºå‚æ•°ï¼Œä¼šæŠŠé”®å€¼å¯¹æ·»åŠ åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœé”®åå­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ã€‚

    2. `xxxxxStorage.getItem('person');` è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œè¿”å›é”®åå¯¹åº”çš„å€¼ã€‚

    3. `xxxxxStorage.removeItem('key');` è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠè¯¥é”®åä»å­˜å‚¨ä¸­åˆ é™¤ã€‚

     4. `xxxxxStorage.clear()` è¯¥æ–¹æ³•ä¼šæ¸…ç©ºå­˜å‚¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚

4. å¤‡æ³¨ï¼š

    1. SessionStorage å­˜å‚¨çš„å†…å®¹ä¼šéšç€æµè§ˆå™¨çª—å£å…³é—­è€Œæ¶ˆå¤±ã€‚
    2. LocalStorage å­˜å‚¨çš„å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ä¼šæ¶ˆå¤±ã€‚
    3. `xxxxxStorage.getItem(xxx)`å¦‚æœxxxå¯¹åº”çš„valueè·å–ä¸åˆ°ï¼Œé‚£ä¹ˆgetItemçš„è¿”å›å€¼æ˜¯nullã€‚
    4. `JSON.parse(null)`çš„ç»“æœä¾ç„¶æ˜¯nullã€‚



# 6. æœ¬åœ°å­˜å‚¨ç‰ˆæœ¬
## App.vue
```html
<script>
  export default {
    data(){
      return {
        // ä»localStorageè¯»å–todos
        todos: JSON.parse(window.localStorage.getItem('todos_key') || '[]')

        // todos: [
        //   {title: 'åƒé¥­', complete: false},
        //   {title: 'ç¡è§‰', complete: true},
        //   {title: 'æ•²ä»£ç ', complete: false}
        // ]
      }
    },
    watch: { //ç›‘è§†
      todos:{
        deep: true, // æ·±åº¦ç›‘è§†
        handler: function(value){
          // å°†todosæœ€æ–°çš„å€¼çš„jsonæ•°æ®ï¼Œä¿å­˜åˆ°localStorage
          window.localStorage.setItem('todos_key', JSON.stringify(value))
        }
      }
    },   
  }
</script>
```
[é¡¹ç›®ä»£ç  https://github.com/yk2012/vue_demo/tree/main/demo3_TodoList](https://github.com/yk2012/vue_demo/tree/main/demo3_TodoList)








> æœ€åï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ä¸“æ ï¼Œå’Œ**YKèŒ**åšå¥½æœ‹å‹

