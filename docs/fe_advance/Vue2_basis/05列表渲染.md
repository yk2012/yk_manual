---
theme: vue-pro
highlight: a11y-dark
---
> å—¨ï¼~ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯YKèŒ ğŸ· ï¼Œä¸€ä¸ªå¾®ç³»å‰ç«¯ âœ¨ï¼Œçˆ±æ€è€ƒï¼Œçˆ±æ€»ç»“ï¼Œçˆ±è®°å½•ï¼Œçˆ±åˆ†äº« ğŸ¹ï¼Œæ¬¢è¿å…³æ³¨æˆ‘å‘€ ğŸ˜˜ ~ [å¾®ä¿¡å·: `yk2012yk2012`ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼š`ykyk2012`]


ã€Œè¿™æ˜¯æˆ‘å‚ä¸11æœˆæ›´æ–‡æŒ‘æˆ˜çš„ç¬¬19å¤©ï¼Œæ´»åŠ¨è¯¦æƒ…æŸ¥çœ‹ï¼š[2021æœ€åä¸€æ¬¡æ›´æ–‡æŒ‘æˆ˜](https://juejin.cn/post/7023643374569816095/ "https://juejin.cn/post/7023643374569816095/")ã€


> ä»Šå¤©å­¦ä¹ åˆ—è¡¨æ¸²æŸ“ `v-for`æŒ‡ä»¤ å…ˆäº†è§£åŸºæœ¬ä½¿ç”¨ï¼Œå†è°ˆè°ˆå…¶ä¸­`key`çš„ä½œç”¨

# 1. åˆ—è¡¨æ˜¾ç¤º

`v-for` æŒ‡ä»¤

1. ç”¨äºå±•ç¤ºåˆ—è¡¨æ•°æ®
2. è¯­æ³•ï¼š`v-for="(item, index) in xxx" :key="yyy"`
3. å¯éå†ï¼šæ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰ã€æŒ‡å®šæ¬¡æ•°ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰

- æ•°ç»„: `(item, index)`
- å¯¹è±¡:  `(value, key)`
- å­—ç¬¦ä¸²ï¼š`(char, index)`
- æ•°å­—ï¼š`(number, index)`

# 2. keyçš„åŸç†
1. è™šæ‹ŸDOMä¸­`key`çš„ä½œç”¨ï¼š

> keyæ˜¯è™šæ‹ŸDOMå¯¹è±¡çš„æ ‡è¯†ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVueä¼šæ ¹æ®ã€æ–°æ•°æ®ã€‘ç”Ÿæˆã€æ–°çš„è™šæ‹ŸDOMã€‘, éšåVueè¿›è¡Œã€æ–°è™šæ‹ŸDOMã€‘ä¸ã€æ—§è™šæ‹ŸDOMã€‘çš„å·®å¼‚æ¯”è¾ƒï¼Œæ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼š
				
2. å¯¹æ¯”è§„åˆ™ï¼š
    1) æ—§è™šæ‹ŸDOMä¸­æ‰¾åˆ°äº†ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„`key`ï¼š
         - è‹¥è™šæ‹ŸDOMä¸­å†…å®¹æ²¡å˜, ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„çœŸå®DOM
         - è‹¥è™šæ‹ŸDOMä¸­å†…å®¹å˜äº†, åˆ™ç”Ÿæˆæ–°çš„çœŸå®DOMï¼Œéšåæ›¿æ¢æ‰é¡µé¢ä¸­ä¹‹å‰çš„çœŸå®DOM

    2) æ—§è™šæ‹ŸDOMä¸­æœªæ‰¾åˆ°ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„`key`åˆ›å»ºæ–°çš„çœŸå®DOMï¼Œéšåæ¸²æŸ“åˆ°åˆ°é¡µé¢ã€‚
						
3. ç”¨`index`ä½œä¸º`key`å¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š
    1) è‹¥å¯¹æ•°æ®è¿›è¡Œï¼šé€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œ: ä¼šäº§ç”Ÿæ²¡æœ‰å¿…è¦çš„çœŸå®DOMæ›´æ–° `==>` ç•Œé¢æ•ˆæœæ²¡é—®é¢˜, ä½†æ•ˆç‡ä½
    2) å¦‚æœç»“æ„ä¸­è¿˜åŒ…å«è¾“å…¥ç±»çš„DOMï¼š ä¼šäº§ç”Ÿé”™è¯¯DOMæ›´æ–° `==> `ç•Œé¢æœ‰é—®é¢˜

4. å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©`key`:
    1) æœ€å¥½ä½¿ç”¨æ¯æ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ä½œä¸º`key`, æ¯”å¦‚idã€æ‰‹æœºå·ã€èº«ä»½è¯å·ã€å­¦å·ç­‰å”¯ä¸€å€¼ã€‚
    2) å¦‚æœä¸å­˜åœ¨å¯¹æ•°æ®çš„é€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œï¼Œä»…ç”¨äºæ¸²æŸ“åˆ—è¡¨ç”¨äºå±•ç¤ºï¼Œä½¿ç”¨`index`ä½œä¸º`key`æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚




# 3. Vueç›‘è§†æ•°æ®çš„åŸç†
1. vueä¼šç›‘è§†`data`ä¸­æ‰€æœ‰å±‚æ¬¡çš„æ•°æ®ã€‚

2. å¦‚ä½•ç›‘æµ‹å¯¹è±¡ä¸­çš„æ•°æ®ï¼Ÿ

> é€šè¿‡setterå®ç°ç›‘è§†ï¼Œä¸”è¦åœ¨new Vueæ—¶å°±ä¼ å…¥è¦ç›‘æµ‹çš„æ•°æ®ã€‚
    
â‘  å¯¹è±¡ä¸­åè¿½åŠ çš„å±æ€§ï¼ŒVueé»˜è®¤ä¸åšå“åº”å¼å¤„ç†

â‘¡ å¦‚éœ€ç»™åæ·»åŠ çš„å±æ€§åšå“åº”å¼ï¼Œè¯·ä½¿ç”¨å¦‚ä¸‹APIï¼š`Vue.set(targetï¼ŒpropertyName/indexï¼Œvalue)` æˆ– `vm.$set(targetï¼ŒpropertyName/indexï¼Œvalue)`

3. å¦‚ä½•ç›‘æµ‹æ•°ç»„ä¸­çš„æ•°æ®ï¼Ÿ
	é€šè¿‡åŒ…è£¹æ•°ç»„æ›´æ–°å…ƒç´ çš„æ–¹æ³•å®ç°ï¼Œæœ¬è´¨å°±æ˜¯åšäº†ä¸¤ä»¶äº‹ï¼š
    1) è°ƒç”¨åŸç”Ÿå¯¹åº”çš„æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œæ›´æ–°ã€‚
    2) é‡æ–°è§£ææ¨¡æ¿ï¼Œè¿›è€Œæ›´æ–°é¡µé¢ã€‚

4. åœ¨Vueä¿®æ”¹æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ ä¸€å®šè¦ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š
    1) ä½¿ç”¨è¿™äº›API: `push()`ã€`pop()`ã€`shift()`ã€`unshift()`ã€`splice()`ã€`sort()`ã€`reverse()`
    2) `Vue.set()` æˆ– `vm.$set()`

ç‰¹åˆ«æ³¨æ„ï¼š`Vue.set()` å’Œ `vm.$set()` ä¸èƒ½ç»™ `vm` æˆ– `vm` çš„æ ¹æ•°æ®å¯¹è±¡ æ·»åŠ å±æ€§ï¼ï¼ï¼

```html
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>æ€»ç»“æ•°æ®ç›‘è§†</title>
  <style>
    button {
      margin-top: 10px;
    }
  </style>
  <!-- å¼•å…¥Vue -->
  <script type="text/javascript" src="../js/vue.js"></script>
</head>

<body>
  <!--

    -->
  <!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
  <div id="root">
    <h1>å­¦ç”Ÿä¿¡æ¯</h1>
    <button @click="student.age++">å¹´é¾„+1å²</button> <br />
    <button @click="addSex">æ·»åŠ æ€§åˆ«å±æ€§ï¼Œé»˜è®¤å€¼ï¼šç”·</button> <br />
    <button @click="student.sex = 'æœªçŸ¥' ">ä¿®æ”¹æ€§åˆ«</button> <br />
    <button @click="addFriend">åœ¨åˆ—è¡¨é¦–ä½æ·»åŠ ä¸€ä¸ªæœ‹å‹</button> <br />
    <button @click="updateFirstFriendName">ä¿®æ”¹ç¬¬ä¸€ä¸ªæœ‹å‹çš„åå­—ä¸ºï¼šå¼ ä¸‰</button> <br />
    <button @click="addHobby">æ·»åŠ ä¸€ä¸ªçˆ±å¥½</button> <br />
    <button @click="updateHobby">ä¿®æ”¹ç¬¬ä¸€ä¸ªçˆ±å¥½ä¸ºï¼šå¼€è½¦</button> <br />
    <button @click="removeSmoke">è¿‡æ»¤æ‰çˆ±å¥½ä¸­çš„æŠ½çƒŸ</button> <br />
    <h3>å§“åï¼š{{student.name}}</h3>
    <h3>å¹´é¾„ï¼š{{student.age}}</h3>
    <h3 v-if="student.sex">æ€§åˆ«ï¼š{{student.sex}}</h3>
    <h3>çˆ±å¥½ï¼š</h3>
    <ul>
      <li v-for="(h,index) in student.hobby" :key="index">
        {{h}}
      </li>
    </ul>
    <h3>æœ‹å‹ä»¬ï¼š</h3>
    <ul>
      <li v-for="(f,index) in student.friends" :key="index">
        {{f.name}}--{{f.age}}
      </li>
    </ul>
  </div>
</body>

<script type="text/javascript">
  Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚

  const vm = new Vue({
    el: '#root',
    data: {
      student: {
        name: 'tom',
        age: 18,
        hobby: ['æŠ½çƒŸ', 'å–é…’', 'çƒ«å¤´'],
        friends: [{
            name: 'jerry',
            age: 35
          },
          {
            name: 'tony',
            age: 36
          }
        ]
      }
    },
    methods: {
      addSex() {
        // Vue.set(this.student,'sex','ç”·')
        this.$set(this.student, 'sex', 'ç”·')
      },
      addFriend() {
        this.student.friends.unshift({
          name: 'jack',
          age: 70
        })
      },
      updateFirstFriendName() {
        this.student.friends[0].name = 'å¼ ä¸‰'
      },
      addHobby() {
        this.student.hobby.push('å­¦ä¹ ')
      },
      updateHobby() {
        // this.student.hobby.splice(0,1,'å¼€è½¦')
        // Vue.set(this.student.hobby,0,'å¼€è½¦')
        this.$set(this.student.hobby, 0, 'å¼€è½¦')
      },
      removeSmoke() {
        this.student.hobby = this.student.hobby.filter((h) => {
          return h !== 'æŠ½çƒŸ'
        })
      }
    }
  })
</script>

</html>
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c58c0e8fc9ac407c9126b171d7362ca4~tplv-k3u1fbpfcp-zoom-1.image)


# 4. æ•°ç»„æ›´æ–°æ£€æµ‹

- Vue é‡å†™äº†æ•°ç»„ä¸­çš„ä¸€ç³»åˆ—æ”¹å˜æ•°ç»„å†…éƒ¨æ•°æ®çš„æ–¹æ³•ï¼ˆå…ˆè°ƒç”¨åŸç”Ÿï¼Œå†æ›´æ–°ç•Œé¢ï¼‰
![æ•°ç»„å˜æ›´æ–¹æ³•](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b00184c5443b4f8d981fb822d80066d3~tplv-k3u1fbpfcp-zoom-1.image)
```javascript
this.persons[index] = newP;
//å¹¶æ²¡æœ‰æ”¹å˜personsæœ¬èº«ï¼Œæ•°ç»„å†…éƒ¨å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯æ²¡æœ‰è°ƒç”¨å˜å¼‚æ–¹æ³•ï¼Œvueä¸ä¼šæ›´æ–°ç•Œé¢
```
ä¹Ÿå¯ä»¥æ›¿æ¢item

ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¹Ÿæœ‰éå˜æ›´æ–¹æ³•ï¼Œä¾‹å¦‚ filter()ã€concat() å’Œ slice()ã€‚å®ƒä»¬ä¸ä¼šå˜æ›´åŸå§‹æ•°ç»„ï¼Œè€Œæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚å½“ä½¿ç”¨éå˜æ›´æ–¹æ³•æ—¶ï¼Œå¯ä»¥ç”¨æ–°æ•°ç»„æ›¿æ¢æ—§æ•°ç»„ã€‚

```javascript
let fpersons = persons.filter(
  p => p.name.includes(searchName)
)
```

```html
<body>
  <div id="demo">
    <h2>æµ‹è¯•ï¼šv-foréå†æ•°ç»„</h2>
    <ul>
      <li v-for="(p, index) in persons" :key="index">
        {{index}}---{{p.name}}---{{p.age}}
        <button @click="deleteP(index)">åˆ é™¤</button>
        <button @click="updateP(index, {name:'Cat', age: 20})">æ›´æ–°</button>
      </li>
    </ul>

    <h2>æµ‹è¯•ï¼šv-foréå†å¯¹è±¡</h2>
    <ul>
      <li v-for="(value, key) in persons[1]" :key="key">
        {{value}}---{{key}}
      </li>
    </ul>

  </div>

  <script src="../js/vue.js"></script>
  <script>
    // Vueæœ¬èº«åªæ˜¯ç›‘è§†äº†personsçš„æ”¹å˜ï¼Œæ²¡æœ‰ç›‘è§†æ•°ç»„å†…éƒ¨æ•°æ®çš„æ”¹å˜
    // Vue é‡å†™äº†æ•°ç»„ä¸­çš„ä¸€ç³»åˆ—æ”¹å˜æ•°ç»„å†…éƒ¨æ•°æ®çš„æ–¹æ³•ï¼ˆå…ˆè°ƒç”¨åŸç”Ÿï¼Œå†æ›´æ–°ç•Œé¢ï¼‰
    new Vue({
      el: '#demo',
      data: {
        persons: [{
            name: 'Tom',
            age: 18
          },
          {
            name: 'Jack',
            age: 19
          },
          {
            name: 'Marry',
            age: 16
          },
          {
            name: 'Rose',
            age: 12
          },
        ]
      },
      methods: {
        deleteP(index) {
          // åˆ é™¤personsä¸­æŒ‡å®šidnexçš„pï¼ˆæœ‰æ•°æ®ç»‘å®šï¼‰
          this.persons.splice(index, 1);
        },
        updateP(index, newP) {
          // this.persons[index] = newP; //æ•°æ®ï¼ˆæ•°ç»„å†…éƒ¨ï¼‰å˜äº†ï¼Œç•Œé¢æ²¡æœ‰å˜åŒ–ï¼ˆæ²¡æœ‰æ•°æ®ç»‘å®šï¼‰
          //å¹¶æ²¡æœ‰æ”¹å˜personsæœ¬èº«ï¼Œæ•°ç»„å†…éƒ¨å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯æ²¡æœ‰è°ƒç”¨å˜å¼‚æ–¹æ³•ï¼Œvueä¸ä¼šæ›´æ–°ç•Œé¢
          // this.persons = []  //ç•Œé¢æœ‰å˜åŒ–ï¼Œæ”¹å˜äº†persons
          this.persons.splice(index, 1, newP);
        }
      }
    })
  </script>
</body>
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2547c14f20d84f8ab5124403c8dda069~tplv-k3u1fbpfcp-zoom-1.image)

# 5. è¿‡æ»¤ä¸æ’åº
è¿‡æ»¤æ“ä½œ

å¯ä»¥ä½¿ç”¨watchä¹Ÿå¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œä½¿ç”¨è®¡ç®—å±æ€§æ›´åŠ ç®€å•æ–¹ä¾¿ä¸€ç‚¹

```html
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>åˆ—è¡¨è¿‡æ»¤</title>
  <script type="text/javascript" src="../js/vue.js"></script>
</head>

<body>
  <!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
  <div id="root">
    <h2>äººå‘˜åˆ—è¡¨</h2>
    <input type="text" placeholder="è¯·è¾“å…¥åå­—" v-model="keyWord">
    <ul>
      <li v-for="(p,index) of filPerons" :key="index">
        {{p.name}}-{{p.age}}-{{p.sex}}
      </li>
    </ul>
  </div>

  <script type="text/javascript">
    Vue.config.productionTip = false

    //ç”¨watchå®ç°
    //#region 
    /* new Vue({
      el:'#root',
      data:{
        keyWord:'',
        persons:[
          {id:'001',name:'é©¬å†¬æ¢…',age:19,sex:'å¥³'},
          {id:'002',name:'å‘¨å†¬é›¨',age:20,sex:'å¥³'},
          {id:'003',name:'å‘¨æ°ä¼¦',age:21,sex:'ç”·'},
          {id:'004',name:'æ¸©å…†ä¼¦',age:22,sex:'ç”·'}
        ],
        filPerons:[]
      },
      watch:{
        keyWord:{
          immediate:true,
          handler(val){
            this.filPerons = this.persons.filter((p)=>{
              return p.name.indexOf(val) !== -1
            })
          }
        }
      }
    }) */
    //#endregion

    //ç”¨computedå®ç°
    new Vue({
      el: '#root',
      data: {
        keyWord: '',
        persons: [{
            id: '001',
            name: 'é©¬å†¬æ¢…',
            age: 19,
            sex: 'å¥³'
          },
          {
            id: '002',
            name: 'å‘¨å†¬é›¨',
            age: 20,
            sex: 'å¥³'
          },
          {
            id: '003',
            name: 'å‘¨æ°ä¼¦',
            age: 21,
            sex: 'ç”·'
          },
          {
            id: '004',
            name: 'æ¸©å…†ä¼¦',
            age: 22,
            sex: 'ç”·'
          }
        ]
      },
      computed: {
        filPerons() {
          return this.persons.filter((p) => {
            return p.name.indexOf(this.keyWord) !== -1
          })
        }
      }
    })
  </script>

</html>
```
æ’åºæ“ä½œ

```javascript
computed:{
  filPerons(){
    const arr = this.persons.filter((p)=>{
      return p.name.indexOf(this.keyWord) !== -1
    })
    //åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦éœ€è¦æ’åº
    if(this.sortType){
      arr.sort((p1,p2)=>{
        return this.sortType === 1 ? p2.age-p1.age : p1.age-p2.age
      })
    }
    return arr
  }
}
```

ä¾‹å­

```html
<body>
  <div id="test">
    <input type="text" v-model="searchName">
    <ul>
      <li v-for="(p, index) in filterPersons" :key="index">
        {{index}}---{{p.name}}---{{p.age}}
      </li>
    </ul>
    <button @click="setOrderType(1)">å¹´é¾„å‡åº</button>
    <button @click="setOrderType(2)">å¹´é¾„é™åº</button>
    <button @click="setOrderType(0)">è¿˜åŸé¡ºåº</button>
  </div>

  <script src="../js/vue.js"></script>

  <script>
    new Vue({
      el: '#test',
      data: {
        searchName: '',
        orderType: 0, //0ä»£è¡¨åŸæœ¬ï¼Œ 1ä»£è¡¨å‡åºï¼Œ 2ä»£è¡¨é™åº
        persons: [{
            name: 'Tom',
            age: 10
          },
          {
            name: 'Jack',
            age: 16
          },
          {
            name: 'Rose',
            age: 12
          },
          {
            name: 'Aka',
            age: 18
          }
        ]
      },
      computed: {
        filterPersons() {
          // 1. å–å‡ºç›¸å…³æ•°æ®
          const {
            searchName,
            persons,
            orderType
          } = this; // è§£æ„èµ‹å€¼

          let fPersons;

          // 2. å¯¹personsè¿›è¡Œè¿‡æ»¤
          fPersons = persons.filter(p => p.name.indexOf(searchName) !== -1);

          // 3. æ’åº
          if (orderType !== 0) {
            fPersons.sort(function (p1, p2) { // è¿”å›è´Ÿæ•°p1åœ¨å‰ï¼Œè¿”å›æ­£æ•°p2åœ¨å‰
              if (orderType === 2) {
                return p2.age - p1.age; // é™åº
              } else {
                return p1.age - p2.age; // å‡åº
              }
            })
          }
          return fPersons;
        }
      },
      methods: {
        setOrderType(orderType) {
          this.orderType = orderType;
        }
      }
    })
  </script>
</body>
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b738000369ee4b88bb1aafd216064946~tplv-k3u1fbpfcp-zoom-1.image)



> æœ€åï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ä¸“æ ï¼Œå’Œ**YKèŒ**åšå¥½æœ‹å‹